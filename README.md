# <img src="https://github.com/user-attachments/assets/7e36b0d3-34f1-4fa8-a576-ddd434e96247" width="100" height="100"/> 재밌는한국어 


## 💻 프로젝트 소개
- **프로젝트 기간**: 2025.11.05~2025.11.27

## 📖 프로젝트 개요
내수 시장이 줄어드는 반면 한류 시장이 커지고 있으며, 한국인의 문화적 관점에서 만든 한국어 교육 앱이 부재합니다. 이에 해외 문화권 사용자를 대상으로 한국의 언어와 문화를 함께 교육하는 서비스를 제공하고자 프로젝트를 시작했습니다.

## 🎯 기획 목표
1. 사용자에게 한국의 언어와 문화를 함께 교육하는 한국형 교육·커뮤니티 플랫폼 구축
2. 한국의 전통 요소를 살린 캐릭터를 기반으로 문화를 체험하게 하는 UI 제공
   - ex) 갓을 쓴 토끼, 족두리를 쓴 호랑이 마스코트 이모티콘

## 📅 프로젝트 일정
- **1주차**: 주제 선정, 기획서 작성
- **2주차**: 1차 기능 설계 및 코드 작업, 플러터 UI 레이아웃
- **3주차**: 2차 기능 설계 및 코드 작업, 플러터 UI 완성
- **4주차**: 코드 병합 후 최종 테스트, 코드리뷰 및 트러블슈팅, 프레젠테이션

## 🧑‍💻 팀원 역할

### 정유진
- 프로토타입
- 사용자단 교육 & 시험
- 사용자단 UI
- 시험 채점 API
- 설정, 언어 변경, 테마 스토어 기능
- 스토어와 연동된 포인트 기능

### 최규호
- 회원 계정 기능(회원가입, 로그인, 이메일/비밀번호 찾기, 정보 조회 등)
- 출석 기능
- JWT 기반 사용자 인증 인가 기능
- SMTP 기반 메일 기능

### 최동진
- 기획, (구)프로토타입
- 관리자단 교육 & 시험 & 회원 & 게임
- 관리자단 UI
- 랭킹, 자동 번역 API, TTS API
- DB 통계 기반 랭킹 기능
- JS 기반 한글 게임 기능
- 시험모드 추가(무한모드/하드모드)

### 정은주
- Git 버전 관리
- WebSocket 기반 실시간 채팅 기능
- 채팅과 연동된 친구 기능
- 채팅 메시지 히스토리 저장/조회
- 다국어(i18n) 설정 기능

## 🛠️ 기술 스택

### Backend
- Java
- Spring Boot
- Spring Security
- MyBatis
- MySQL
- Lombok
- Bcrypt
- Validation
- JPA

### Frontend
- React
- Redux
- Redux-Persist
- React-Router-DOM
- JSX
- JavaScript
- CSS

### API & Library
- Google Cloud Translation API
- Google Cloud Text-to-Speech API
- Google Gemini API
- Crizin (발음기호 라이브러리)
- i18next (언어 변경)
- JJWT
- WebSocket
- Apache POI

## 🏗️ 시스템 설계

### 메뉴 구조
- **관리자**: 교육 관리, 시험 관리, 회원 관리, 게임 관리
- **사용자**: 교육, 시험, 마이페이지, 랭킹, 게임, 스토어, 채팅, 친구

### DB 설계
- ERD 기반 PK/FK 구조
- 관리자/사용자 도메인 분리

### 기능 흐름도
교육 등록(관리자) → 시험 등록(관리자) → 마이페이지 언어 선택(사용자) → 교육 조회(사용자) → 시험 조회(사용자) → 랭킹 조회(사용자)

## ✨ 주요 기능
- 스프링 시큐리티 & 비크립트 기반 인증 및 보안 처리
- JWT 기반 사용자 인증 인가 기능
- SMTP 기반 비밀번호 재설정 메일 발송
- 마스코트 캐릭터 이미지, TTS 등을 활용한 교육
- 그림, 음성, 주관식으로 이루어진 시험
- 시험모드 선택 기능(무한모드/하드모드)
- 다국어 언어 지원
- JS 기반 한글 게임 & 랭킹 연동
- 스토어와 연동된 포인트 구매 기능
- 테마 설정 기능

## 👩‍💻 코드 리뷰

### 세션 vs JWT 인증 방식 분기 처리
웹 기반 요청은 세션 인증 방식을 사용하고, Flutter 앱 요청은 JWT 방식을 사용하도록 요청 헤더 기반으로 클라이언트 타입을 구분하여 처리했습니다.

### 다국어 전문가 검토용 전체 예문 다운로드

다국어 예문을 엑셀 파일로 만들어 언어 전문가에게 전달하는 기능입니다.

#### 배경
Google Translate API 기반의 빠른 번역 저장 로직은 편리했으나, 번역 품질의 편차가 컸습니다. 언어별로 전문가가 검토하도록 json을 엑셀로 변환하는 기능이 필요해 Apache POI를 도입했습니다.

#### 로직 흐름
1. 장르, 주제, 예문 데이터를 조회
2. 언어별 시트(sheet)를 생성
3. 예문을 저장할 셀 생성
4. 6번째 셀에 "수정된 내용"을 입력할 칸을 추가
5. 언어 코드에 따라 적절한 번역 예문을 매핑하여 시트에 저장

## 💫 트러블슈팅

### 세션 인증 실패 문제

#### 문제 정의
웹(React)에서는 잘 유지되던 세션 인증이 Flutter 환경에서는 유지되지 않는 문제가 발생했습니다.

#### 원인 추론
- Flutter는 기본적으로 세션 자동 유지가 되지 않음
- CookieManager로 쿠키를 관리해도 페이지 이동 시 세션 유지 실패
- 웹에서는 문제없으나 모바일 앱에서는 지속적 인증 유지가 안 됨

#### 해결책
요청 헤더 기반으로 클라이언트 타입을 구분하여 처리했습니다.
- **웹** → 세션 인증 유지
- **Flutter 앱** → JWT 기반 인증

기존 컨트롤러의 세션 기반 메서드를 모두 JWT 방식으로 리팩토링하여 문제를 해결했습니다.

### 무한모드 / 하드모드 시험 로직 개선 과정

#### 문제 정의
기존 정기시험은 DB에 저장된 문항을 정해진 순서(그림 → 음성 → 주관식)로 출제했습니다. 암기로 쉽게 통과 가능해, 도전형 시험 모드가 필요하다고 판단했습니다.

#### 원인 추론
- **무한모드**: 사용자가 열람한 주제의 예문 기반 랜덤 출제
- **하드모드**: 모든 주제의 예문을 랜덤 출제

하지만 기대와 달리 고정된 문항만 반복적으로 등장하는 문제가 발생했습니다.

#### 해결책
- DB에 시험문항을 저장하던 기존 구조를 폐기
- 클라이언트가 시험 화면에 접근할 때마다 새로운 난수 기반 문항을 즉시 생성하도록 변경
- 주관식 문항은 AI 채점 딜레이(3초 이상) 때문에 무한/하드모드에서는 제외하여 UX 개선

## ⚡️ 향후 개선 방향

### AI 기술 활용 로직 구현
생성형 이미지 기능으로 관리자 교육 등록을 간편화하고, AI 챗봇 기능으로 캐릭터와 묻고 답하는 교육 방식을 제공합니다.

### 난이도 / 교육방식 커스텀
말하기, 듣기, 읽기, 쓰기 등 기본 교육방식에 따른 예문 제공 및 초보자부터 명예한국인에 이르는 난이도 시스템을 제공합니다.

### 채팅 기능 구체화
토돌이, 호순이 커플티콘 출시로 사용자 리텐션을 유지하고 BM을 구현할 수 있습니다.

### 결제 시스템 추가
라이트 사용자에게는 무료 기반 서비스를 제공하고, 코어 사용자에게는 구독형 콘텐츠를 제공합니다. 미성년자 대상으로는 모든 콘텐츠를 무료로 제공합니다.
